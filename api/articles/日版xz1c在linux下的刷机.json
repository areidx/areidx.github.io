{"title":"日版xz1c在linux下的刷机","uid":"3bcde510f173b8e6dad153d9a10aaba3","slug":"日版xz1c在linux下的刷机","date":"2022-04-04T06:02:00.000Z","updated":"2023-01-06T17:21:15.849Z","comments":true,"path":"api/articles/日版xz1c在linux下的刷机.json","keywords":null,"cover":[],"content":"<h1 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h1><p>因为在咸鱼上买的日版xz1c好像找不到什么教程(特别是我还用的linux😢),在自己胡乱的摸索下记录一下刷机的过程,希望可以提供参考.本文不提供现成的文件只有链接请自行下载需要的软件或者固件</p>\n<h1 id=\"大致流程\"><a href=\"#大致流程\" class=\"headerlink\" title=\"大致流程\"></a>大致流程</h1><ol>\n<li><p>日版基本都不能解bl锁,我先去淘宝解锁了(200大洋😢).</p>\n</li>\n<li><p>解bl(bootloader)锁.</p>\n</li>\n<li><p>刷twrp到recovery分区</p>\n</li>\n<li><p>magisk root</p>\n</li>\n</ol>\n<h1 id=\"手机和电脑环境\"><a href=\"#手机和电脑环境\" class=\"headerlink\" title=\"手机和电脑环境\"></a>手机和电脑环境</h1><p>手机:  xperia xz1c SO-02k 日版docomo<br>固件版本: 47.2B.5.38 安卓9<br>电脑环境: archlinux<br>使用的软件: mono(XperiFirm需要使用到)  FlashTool unsin AIK-linux fdm(下载)</p>\n<h1 id=\"具体流程\"><a href=\"#具体流程\" class=\"headerlink\" title=\"具体流程\"></a>具体流程</h1><ol>\n<li><p>adb安装 arch直接安装android-tools 即可<code>sudo pacman -S android-tools</code>;安装之后手机关机状态下按住音量上不放连接电脑会亮起蓝灯(可以刷rec,解bl锁等),音量下进入绿灯(强刷)</p>\n</li>\n<li><p>强刷日版版本</p>\n<ul>\n<li><p>安装mono <code>sudo pacman -S mono</code></p>\n</li>\n<li><p>下载<a href=\"https://xperifirm.com/\">Xperifirm</a></p>\n</li>\n<li><p>运行下载 <code>mono XperiFirm-x64.exe</code><br> <img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/XperiFirm-man.png\" alt=\"主界面\"><br><img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/XperiFirm-download-page.png\" alt=\"下载界面\"><br>点击下载会开始下载然后自动打包但是因为国内的网络环境问题可能中断(这中断就会重新开始下载),所以我这里用Manual.简单解释一下 按照要求创建文件夹(注意有空格用单引号或者双引号),创建子文件夹,使用工具下载制定文件即可(我使用的fdm);等待下载完毕点击 Merge 选择文件夹等待即可<br><img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/XperiFirm-download-marge.png\" alt=\"下载\"><br>好了之后文件是这样的(newflasher.x64不是下载的文件)<br><img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/XperiFirm-files.png\"><br>使用Flashtool把文件夹打包然后后缀改成ftf即可,这里我为了方便直接使用newflasher <a href=\"https://forum.xda-developers.com/t/tool-newflasher-xperia-command-line-flasher.3619426/\">xda链接</a> 下载解压放进这个文件夹下 linux使用 i686 x64 x86都行 给执行权限就行 win请用exe应该点击就行<br>手机绿灯连接,输入n  n 等待刷进去即可</p>\n</li>\n</ul>\n</li>\n<li><p>解bl锁</p>\n<ul>\n<li>先申请解锁码 <a href=\"https://developer.sony.com/develop/open-devices/get-started/unlock-bootloader#unlock-code\">网站</a> 最下面选择设备输入imei码(拨号界面输入*#06#,没有拨号器的话可以在关于手机看到,不能开机一般在sim卡那里会有个小纸条拉出来也有)提交即可<br><img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/sony-bl-webpage.png\" alt=\"申请界面\"></li>\n<li>解锁<br>有了解锁码蓝灯模式连接电脑 输入 <code>fastboot oem unlock 0x解锁码</code> 等待解锁即可<br>解开之后在拨号界面输入 <code>*#*#7378423#*#*</code> 然后选择 Service info &gt; Configuration &gt; Rooting Status 如果是 Bootloader unlocked: Yes 就是解锁成功</li>\n</ul>\n</li>\n<li><p>刷入rec<br>下载rec <a href=\"https://forum.xda-developers.com/t/recovery-twrp-3-3-1-0-lilac-update-2019-09-16.3706704/\">xda</a><br>手机蓝灯模式连接 输入<code>fastboot flash recovery 文件名</code> 等待即可</p>\n</li>\n<li><p>magisk root<br>需要这个版本的固件的boot文件我这个日版刷机文件里没有需要一些操作</p>\n<ul>\n<li><p>得到boot.img<br>下载<a href=\"https://forum.xda-developers.com/t/tool-unsin-sin-v3-v4-v5-unpacker-v1-13.3128106/\">unsin</a>相应文件,解压<br>把固件里面根目录下的kernel_xxx.sin的文件放在这个unsin一起 <code>./unsin 文件名</code> 即可会得到同名的.img的文件;已经能直接使用了但是好像5II还有几个什么的不能直接用,还需要使用AIK 修改东西这里顺便写一下(其他的应该是boot_xxx.sin这个文件)<br>下载 <a href=\"https://forum.xda-developers.com/t/tool-android-image-kitchen-unpack-repack-kernel-ramdisk-win-android-linux-mac.2073775/\">AIK-Linux</a>解压<br>把解密的img文件复制到这个目录下 <code>./unpackimg.sh 文件名</code><br>成功会在这个目录下得到ramdisk文件夹 结构:<br><img src=\"/../images/%E6%97%A5%E7%89%88xz1c%E5%9C%A8linux%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA/AIK-unpack.png\"><br>5ii应该会有一个 fatab.qcom文件 注释 system_ext这一行 </p>\n<p>运行 <code>./repackimg.sh</code> 重新打包得到的就是需要的boot.img文件</p>\n</li>\n<li><p>magisk安装<br>下载<a href=\"https://github.com/topjohnwu/Magisk/releases\">magisk</a>安装<br>选择安装magisk &gt; 修改一个文件 选择之前得到的img文件 等待然后会生成一个magisk修改之后的boot文件,可以把这个文件复制进sd卡.(因为我这个日版直接放在手机里面进去rec找不到了)<br>在关机状态下按住关机键和音量下按键等警告界面消失放开 进入rec 选择install 选择存储地方 选择 刷img(右下角那个) 选择之前制作的magisk修补之后的img文件刷进boot分区,刷写成功重启进入手机即可.</p>\n</li>\n</ul>\n</li>\n</ol>\n","text":"说明因为在咸鱼上买的日版xz1c好像找不到什么教程(特别是我还用的linux😢),在自己胡乱的摸索下记录一下刷机的过程,希望可以提供参考.本文不提供现成的文件只有链接请自行下载需要的软件或者固件 大致流程 日版基本都不能解bl锁,我先去淘宝解锁了(200大洋😢). 解bl(boo...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">说明</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%A4%A7%E8%87%B4%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">大致流程</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%89%8B%E6%9C%BA%E5%92%8C%E7%94%B5%E8%84%91%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">手机和电脑环境</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%85%B7%E4%BD%93%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">具体流程</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2023-01-06T17:21:15.849Z","updated":"2023-01-06T17:21:15.849Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":null,"text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the ...","link":"","photos":[],"count_time":{"symbolsCount":430,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}